{
  "hash": "7b85b989d7a86d155c4d9f0e925fa126",
  "result": {
    "markdown": "---\ntitle: \"Introducing {poweRof10}.\"\ndescription: |\n  A quick introduction to a package I created to scrape data from athletics rankings website www.thepowerof10.info.\ndate: 10/24/2020\nimage: po10.jpg\ncategories:\n  - R\n  - athletics\n---\n\n\n\nAnyone involved in athletics will likely have used www.thepowerof10.info. For those who are unfamiliar, it is basically a database of all the rankings and results for athletics in the UK. I've long been both a fan and competitor (although reluctantly admit my age is starting to show) and spent a good chunk of time on the site. In a [previous post](https://hfshr.netlify.app/posts/2020-03-08-athletics-rankings/) I made an attempt at getting some of this data into R and building a [shiny dashboard](https://harryfish.shinyapps.io/resultsdashboard/) as an alternative way of presenting the results. Since then my R skills have improved a little, especially on the package making front, so I thought I would revisit the code from this old post, improve it and share it in a package. \n\nEnough chatter, show us the package!\n\n# poweRof10\n\nYou can install from github with:\n\n::: {.cell}\n\n```{.r .cell-code}\nremotes::install_github(\"hfshr/poweRof10\")\n\n# packages used\nlibrary(poweRof10)\nlibrary(tidyverse)\nlibrary(gt)\nlibrary(emo)\nlibrary(lubridate)\n```\n:::\n\nThe package is really simple. It has two functions, the first gets the data for an individual athlete, while the second can be used to get the rankings for a given year, event and gender.\n\nFor individual athletes you can use `get_athlete`:\n\n::: {.cell}\n\n```{.r .cell-code}\nme <- get_athlete(fn = \"Harry\", sn = \"Fisher\", club = \"Cardiff\") %>% \n  select(event, perf, pos, venue, date) \n```\n\n::: {.cell-output-stderr}\n```\nWarning: `html_session()` was deprecated in rvest 1.0.0.\nPlease use `session()` instead.\nThis warning is displayed once every 8 hours.\nCall `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.\n```\n:::\n\n::: {.cell-output-stderr}\n```\nWarning: `submit_form()` was deprecated in rvest 1.0.0.\nPlease use `session_submit()` instead.\nThis warning is displayed once every 8 hours.\nCall `lifecycle::last_lifecycle_warnings()` to see where this warning was generated.\n```\n:::\n:::\n\nIt is then possible to do any number of things with the data such as...\n\nMost popular event:\n\n::: {.cell}\n\n```{.r .cell-code}\nme %>% \n  count(event) %>% \n  arrange(-n) %>% \n  head(5) %>% \n  gt() %>% \n  cols_label(\n    n = \"Number of performances\",\n    event = \"Event\"\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"onavbbztxk\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#onavbbztxk .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#onavbbztxk .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#onavbbztxk .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#onavbbztxk .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#onavbbztxk .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#onavbbztxk .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#onavbbztxk .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#onavbbztxk .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#onavbbztxk .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#onavbbztxk .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#onavbbztxk .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#onavbbztxk .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#onavbbztxk .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#onavbbztxk .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onavbbztxk .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#onavbbztxk .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#onavbbztxk .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#onavbbztxk .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#onavbbztxk .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#onavbbztxk .gt_left {\n  text-align: left;\n}\n\n#onavbbztxk .gt_center {\n  text-align: center;\n}\n\n#onavbbztxk .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#onavbbztxk .gt_font_normal {\n  font-weight: normal;\n}\n\n#onavbbztxk .gt_font_bold {\n  font-weight: bold;\n}\n\n#onavbbztxk .gt_font_italic {\n  font-style: italic;\n}\n\n#onavbbztxk .gt_super {\n  font-size: 65%;\n}\n\n#onavbbztxk .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_left\" rowspan=\"1\" colspan=\"1\">Event</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_right\" rowspan=\"1\" colspan=\"1\">Number of performances</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_left\">800</td>\n<td class=\"gt_row gt_right\">110</td></tr>\n    <tr><td class=\"gt_row gt_left\">400</td>\n<td class=\"gt_row gt_right\">31</td></tr>\n    <tr><td class=\"gt_row gt_left\">1500</td>\n<td class=\"gt_row gt_right\">21</td></tr>\n    <tr><td class=\"gt_row gt_left\">600</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n    <tr><td class=\"gt_row gt_left\">HT6K</td>\n<td class=\"gt_row gt_right\">2</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\nClearly the 800m was my preferred event. Although I did take part in some hammer throwing in my early days... (I was terrible at the hammer throw 😂). \n\nNumber of podium finishes:\n\n::: {.cell}\n\n```{.r .cell-code}\nme %>% \n  mutate(pos = as.numeric(pos)) %>% \n  filter(pos < 4) %>% \n  count(pos) %>% \n  mutate(medal = c(medal(1), medal(2), medal(3))) %>% \n  select(medal, n) %>% \n  gt() %>% \n  cols_align(\"center\") %>% \n  cols_label(\n    medal = \"Position\",\n    n = \"Count\"\n  )\n```\n\n::: {.cell-output-display}\n```{=html}\n<div id=\"zekapdpvur\" style=\"overflow-x:auto;overflow-y:auto;width:auto;height:auto;\">\n<style>html {\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Helvetica Neue', 'Fira Sans', 'Droid Sans', Arial, sans-serif;\n}\n\n#zekapdpvur .gt_table {\n  display: table;\n  border-collapse: collapse;\n  margin-left: auto;\n  margin-right: auto;\n  color: #333333;\n  font-size: 16px;\n  font-weight: normal;\n  font-style: normal;\n  background-color: #FFFFFF;\n  width: auto;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #A8A8A8;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #A8A8A8;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_heading {\n  background-color: #FFFFFF;\n  text-align: center;\n  border-bottom-color: #FFFFFF;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_title {\n  color: #333333;\n  font-size: 125%;\n  font-weight: initial;\n  padding-top: 4px;\n  padding-bottom: 4px;\n  border-bottom-color: #FFFFFF;\n  border-bottom-width: 0;\n}\n\n#zekapdpvur .gt_subtitle {\n  color: #333333;\n  font-size: 85%;\n  font-weight: initial;\n  padding-top: 0;\n  padding-bottom: 6px;\n  border-top-color: #FFFFFF;\n  border-top-width: 0;\n}\n\n#zekapdpvur .gt_bottom_border {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_col_headings {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_col_heading {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 6px;\n  padding-left: 5px;\n  padding-right: 5px;\n  overflow-x: hidden;\n}\n\n#zekapdpvur .gt_column_spanner_outer {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: normal;\n  text-transform: inherit;\n  padding-top: 0;\n  padding-bottom: 0;\n  padding-left: 4px;\n  padding-right: 4px;\n}\n\n#zekapdpvur .gt_column_spanner_outer:first-child {\n  padding-left: 0;\n}\n\n#zekapdpvur .gt_column_spanner_outer:last-child {\n  padding-right: 0;\n}\n\n#zekapdpvur .gt_column_spanner {\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: bottom;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  overflow-x: hidden;\n  display: inline-block;\n  width: 100%;\n}\n\n#zekapdpvur .gt_group_heading {\n  padding: 8px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zekapdpvur .gt_empty_group_heading {\n  padding: 0.5px;\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  vertical-align: middle;\n}\n\n#zekapdpvur .gt_from_md > :first-child {\n  margin-top: 0;\n}\n\n#zekapdpvur .gt_from_md > :last-child {\n  margin-bottom: 0;\n}\n\n#zekapdpvur .gt_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  margin: 10px;\n  border-top-style: solid;\n  border-top-width: 1px;\n  border-top-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 1px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 1px;\n  border-right-color: #D3D3D3;\n  vertical-align: middle;\n  overflow-x: hidden;\n}\n\n#zekapdpvur .gt_stub {\n  color: #333333;\n  background-color: #FFFFFF;\n  font-size: 100%;\n  font-weight: initial;\n  text-transform: inherit;\n  border-right-style: solid;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n  padding-left: 12px;\n}\n\n#zekapdpvur .gt_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zekapdpvur .gt_first_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_grand_summary_row {\n  color: #333333;\n  background-color: #FFFFFF;\n  text-transform: inherit;\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n}\n\n#zekapdpvur .gt_first_grand_summary_row {\n  padding-top: 8px;\n  padding-bottom: 8px;\n  padding-left: 5px;\n  padding-right: 5px;\n  border-top-style: double;\n  border-top-width: 6px;\n  border-top-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_striped {\n  background-color: rgba(128, 128, 128, 0.05);\n}\n\n#zekapdpvur .gt_table_body {\n  border-top-style: solid;\n  border-top-width: 2px;\n  border-top-color: #D3D3D3;\n  border-bottom-style: solid;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_footnotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_footnote {\n  margin: 0px;\n  font-size: 90%;\n  padding: 4px;\n}\n\n#zekapdpvur .gt_sourcenotes {\n  color: #333333;\n  background-color: #FFFFFF;\n  border-bottom-style: none;\n  border-bottom-width: 2px;\n  border-bottom-color: #D3D3D3;\n  border-left-style: none;\n  border-left-width: 2px;\n  border-left-color: #D3D3D3;\n  border-right-style: none;\n  border-right-width: 2px;\n  border-right-color: #D3D3D3;\n}\n\n#zekapdpvur .gt_sourcenote {\n  font-size: 90%;\n  padding: 4px;\n}\n\n#zekapdpvur .gt_left {\n  text-align: left;\n}\n\n#zekapdpvur .gt_center {\n  text-align: center;\n}\n\n#zekapdpvur .gt_right {\n  text-align: right;\n  font-variant-numeric: tabular-nums;\n}\n\n#zekapdpvur .gt_font_normal {\n  font-weight: normal;\n}\n\n#zekapdpvur .gt_font_bold {\n  font-weight: bold;\n}\n\n#zekapdpvur .gt_font_italic {\n  font-style: italic;\n}\n\n#zekapdpvur .gt_super {\n  font-size: 65%;\n}\n\n#zekapdpvur .gt_footnote_marks {\n  font-style: italic;\n  font-weight: normal;\n  font-size: 65%;\n}\n</style>\n<table class=\"gt_table\">\n  \n  <thead class=\"gt_col_headings\">\n    <tr>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\">Position</th>\n      <th class=\"gt_col_heading gt_columns_bottom_border gt_center\" rowspan=\"1\" colspan=\"1\">Count</th>\n    </tr>\n  </thead>\n  <tbody class=\"gt_table_body\">\n    <tr><td class=\"gt_row gt_center\">🥇</td>\n<td class=\"gt_row gt_center\">42</td></tr>\n    <tr><td class=\"gt_row gt_center\">🥈</td>\n<td class=\"gt_row gt_center\">31</td></tr>\n    <tr><td class=\"gt_row gt_center\">🥉</td>\n<td class=\"gt_row gt_center\">23</td></tr>\n  </tbody>\n  \n  \n</table>\n</div>\n```\n:::\n:::\n\nOr progression over time:\n\n::: {.cell}\n\n```{.r .cell-code}\nme %>% \n  filter(event == \"800\") %>% \n  mutate(date = as.Date(date, format = \"%d %b %y\"),\n         perf = hms::parse_hms(paste(\"00:\" ,perf))) %>% \n  group_by(year = year(date)) %>% \n  arrange(perf) %>% \n  slice(1) %>% \n  ggplot(aes(x = year, y = perf)) +\n  geom_line() +\n  labs(y = \"Performance\", \n       x = \"Year\",\n       title = \"Performance over time in the 800m\") +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\nThe package also includes `get_event`, which retrieves the rankings for a specific event, age group, gender and year. For example to get the 100m rankings for 2016 for men you would use:\n\n::: {.cell}\n\n```{.r .cell-code}\nevent_100 <- get_event(event = \"100\", agegroup = \"ALL\", gender = \"M\", year = 2016, top_n = 20) \n```\n:::\n\nMaybe you might want to compare the progression in a particular event over the last decade. We can use `get_event` with a combination of `purrr::map_dfr` to loop over several dates in one go.\n\n::: {.column-margin}\n\nTo speed this up you could potentially use `furrr::future_map_dfr` \n\n:::\n\n::: {.cell hash='index_cache/html/unnamed-chunk-14_d549f1d4e37a66d8f3b88b105f3f2e20'}\n\n```{.r .cell-code}\ndates <- seq(from = 2013, to = 2020)\n\nrankings <- map_dfr(dates, ~get_event(event =\"100\", \n                                      agegroup = \"ALL\", \n                                      gender = \"M\", \n                                      year = .x, \n                                      top_n = 1))\n```\n:::\n\nThrowing together a quick visualisation:\n\n::: {.column-margin}\n\nI've used the great `ggtext` package here to add some colour to the labels and highlight the fastest time\n\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggtext)\n\nrankings %>% \n  mutate(perf = as.numeric(perf),\n         axislow = min(perf)-min(perf)*0.01,\n         axishigh = max(perf)+max(perf)*0.02) %>% \n  mutate(label = str_c(name, perf, sep = \" - \"),\n         label = case_when(perf == min(perf) ~ paste0(\"<span style='color:#D4AF37'>**\", label, \"**</span>\"),\n                           TRUE ~ label)) %>% \n  {\n  ggplot(., aes(x = input_year, y = perf, \n              group = 1, \n              label = label))+\n  geom_point() +\n  geom_segment(aes(x=input_year, y=perf, xend = input_year, yend =min(perf)-min(perf)*0.01))+\n  scale_y_continuous(expand = c(0,0), limits = c(.$axislow[1], .$axishigh[1])) +\n  coord_flip() +\n  geom_richtext(fill = NA, label.color = NA, aes(hjust = -0.05)) +\n  labs(title = \"Top Performances from 2010 to 2020 in the mens 100M\",\n       x = \"Year\",\n       y = \"Performance\") +\n  theme_light() \n  }\n```\n\n::: {.cell-output-display}\n![](index_files/figure-html/unnamed-chunk-16-1.png){width=672}\n:::\n:::\n\nClearly 2020 is the outlier here, no prizes for guessing why...! \n\n# Wrapping up\n\nSo that's a quick tour of `poweRof10`. Not much too it, but I've had some fun playing with this data so thought I'd share it anyway. Feel free to visit the [package repo](https://github.com/hfshr/poweRof10) and raise an issue if something doesn't work as expected.\n\nTill next time!\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": [],
    "engineDependencies": {},
    "preserve": {},
    "postProcess": null
  }
}